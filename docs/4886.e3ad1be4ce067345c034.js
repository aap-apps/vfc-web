(self.webpackChunkvfc_web=self.webpackChunkvfc_web||[]).push([[4886],{4886:(e,o,t)=>{"use strict";t.r(o),t.d(o,{CsfUploadPageModule:()=>y});var n=t(6274),r=t(4988),i=t(5401),s=t(3991);function c(e,o,t,n){return new(t||(t=Promise))(function(r,i){function s(e){try{a(n.next(e))}catch(o){i(o)}}function c(e){try{a(n.throw(e))}catch(o){i(o)}}function a(e){var o;e.done?r(e.value):(o=e.value,o instanceof t?o:new t(function(e){e(o)})).then(s,c)}a((n=n.apply(e,o||[])).next())})}var a=t(3606),l=t(1887),u=t(3948),d=t(4766);let p=(()=>{class e{constructor(e){this.loadingController=e}showLoader(){return c(this,void 0,void 0,function*(){const e=yield this.loadingController.create({cssClass:"my-custom-class",message:"Please wait...",duration:2e4});yield e.present(),yield e.onDidDismiss(),console.log("Loading dismissed!")})}hideLoader(){return c(this,void 0,void 0,function*(){yield this.loadingController.dismiss()})}}return e.\u0275fac=function(o){return new(o||e)(a.LFG(i.HT))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v=(()=>{class e{constructor(e,o){this.http=e,this.loaderService=o}postFile(e,o){return new Promise((t,n)=>c(this,void 0,void 0,function*(){let r=new FormData;this.loaderService.showLoader(),r.append("file",o),this.http.post(`${d.N.url}/${e}`,r).subscribe(e=>{console.log(e),this.loaderService.hideLoader(),t(e)},e=>{this.loaderService.hideLoader(),this.handleError(e),n(e)})}))}getData(e){return new Promise((o,t)=>c(this,void 0,void 0,function*(){new l.WM({}),window.open(`${d.N.url}/${e}`)}))}handleError(e){return 0===e.status?console.error("An error occurred:",e.error):console.error(`Backend returned code ${e.status}, body was: `,e.error),new u.y(e=>e.error("Something bad happened; please try again later."))}}return e.\u0275fac=function(o){return new(o||e)(a.LFG(l.eN),a.LFG(p))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),f=(()=>{class e{constructor(e){this.apiService=e}uploadCsv(e){return c(this,void 0,void 0,function*(){return yield this.apiService.postFile("csvtovcf/uploadCsv",e)})}}return e.\u0275fac=function(o){return new(o||e)(a.LFG(v))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),h=(()=>{class e{constructor(e){this.apiService=e}convertTheCsvToVcard(e,o){console.log(e,o),this.apiService.getData(`csvtovcf/getJson/${e}/${o}`)}}return e.\u0275fac=function(o){return new(o||e)(a.LFG(v))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function g(e,o){1&e&&(a.TgZ(0,"ion-text"),a.TgZ(1,"h3"),a._uU(2,"file is missing please upload a csv!"),a.qZA(),a.qZA())}function m(e,o){1&e&&(a.TgZ(0,"ion-text"),a.TgZ(1,"h3"),a._uU(2,"please enter the key!"),a.qZA(),a.qZA())}const Z=[{path:"",component:(()=>{class e{constructor(e,o){this.uploadCsvService=e,this.convertCsvService=o,this.filePath="",this.convertorForm=new r.cw({apiFileName:new r.NI("",r.kI.required),key:new r.NI("",r.kI.required)})}getFilePath(e){return c(this,void 0,void 0,function*(){console.log(e.target.files[0]);let o=yield this.uploadCsvService.uploadCsv(e.target.files[0]);console.log(o),this.convertorForm.patchValue({apiFileName:o.fileName})})}ngOnInit(){}sumbit(e){return c(this,void 0,void 0,function*(){this.convertCsvService.convertTheCsvToVcard(e.value.apiFileName,e.value.key),this.convertorForm.reset()})}}return e.\u0275fac=function(o){return new(o||e)(a.Y36(f),a.Y36(h))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-csf-upload"]],decls:23,vars:6,consts:[["expand","full"],["lazy","true","slot","start","name","image"],["accept",".csv","type","file","id","file-input",3,"ngModel","ngModelChange","change"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["formControlName","key","type","text","name","title",3,"disabled"],["type","submit","expand","block",3,"disabled"],["src","https://heremamit.nyc3.digitaloceanspaces.com/csv-vcf.png"]],template:function(e,o){1&e&&(a.TgZ(0,"ion-header"),a.TgZ(1,"ion-toolbar"),a.TgZ(2,"ion-title"),a._uU(3,"csf-upload"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(4,"ion-content"),a.TgZ(5,"ion-card"),a.TgZ(6,"ion-button",0),a._UZ(7,"ion-icon",1),a.TgZ(8,"input",2),a.NdJ("ngModelChange",function(e){return o.filePath=e})("change",function(e){return o.getFilePath(e)}),a.qZA(),a.qZA(),a.TgZ(9,"ion-grid"),a.TgZ(10,"ion-row"),a.TgZ(11,"ion-col"),a.YNc(12,g,3,0,"ion-text",3),a.YNc(13,m,3,0,"ion-text",3),a.TgZ(14,"form",4),a.NdJ("ngSubmit",function(){return o.sumbit(o.convertorForm)}),a.TgZ(15,"ion-item"),a.TgZ(16,"ion-label"),a._uU(17,"key"),a.qZA(),a._UZ(18,"ion-input",5),a.qZA(),a.TgZ(19,"ion-button",6),a._uU(20,"convert"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"ion-col"),a._UZ(22,"img",7),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(8),a.Q6J("ngModel",o.filePath),a.xp6(4),a.Q6J("ngIf",!o.filePath),a.xp6(1),a.Q6J("ngIf",o.filePath),a.xp6(1),a.Q6J("formGroup",o.convertorForm),a.xp6(4),a.Q6J("disabled",!o.convertorForm.value.apiFileName),a.xp6(1),a.Q6J("disabled",o.convertorForm.invalid))},directives:[i.Gu,i.sr,i.wd,i.W2,i.PM,i.YG,i.gu,r.Fj,r.JJ,r.On,i.jY,i.Nd,i.wI,n.O5,r._Y,r.JL,r.sg,i.Ie,i.Q$,i.pK,i.j9,r.u,i.yW],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[s.Bz.forChild(Z)],s.Bz]}),e})(),y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.ez,r.u5,i.Pc,r.UX,w]]}),e})()}}]);